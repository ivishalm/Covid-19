<div class="overlay" *ngIf="isLoading">
    <div class="spinner-wrapper">
      <app-spinner></app-spinner>
    </div>
  </div>
<div class="container">
  <div class="row cases-container">
    <div class="case-box confirmed">
      <h3>Confirmed: {{ worldData[0]?.total_cases | number }}</h3>
    </div>
    <div class="case-box recovered">
      <h3>Recovered: {{ worldData[0]?.total_recovered | number }}</h3>
    </div>
    <div class="case-box death">
      <h3>Dead: {{ worldData[0]?.total_deaths | number }}</h3>
    </div>
    <div class="case-box active">
      <h3>Active: {{ worldData[0]?.active_cases | number }}</h3>
    </div>
  </div>

  <!-- Country Table -->
  <div class="country_table">
  <div class="search-box"> 
      <input (keyup)="applyFilter($event)" placeholder="Search" />
  </div>
   
    <div class="mat-elevation-z8">
      <table mat-table [dataSource]="dataSource" matSort matSortStart="desc">
        <!-- ID Column -->
        <ng-container matColumnDef="country">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Country</th>
          <td mat-cell *matCellDef="let row">{{ row.country }}</td>
        </ng-container>

        <!-- Progress Column -->
        <ng-container matColumnDef="total_cases">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Total Cases</th>
          <td mat-cell *matCellDef="let row">{{ row.total_cases }}</td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="new_cases">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>New Cases</th>
          <td mat-cell *matCellDef="let row" [ngClass]="{'new-cases':row.new_cases!=undefined}">{{ row.new_cases }}</td>
        </ng-container>

        <!-- Color Column -->
        <ng-container matColumnDef="total_deaths">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Total Deaths</th>
          <td mat-cell *matCellDef="let row"> {{ row.total_deaths }}</td>
        </ng-container>
        <ng-container matColumnDef="new_deaths">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>New Deaths</th>
          <td mat-cell *matCellDef="let row" [ngClass]="{'new-deaths':row.new_deaths!=undefined}"> {{ row.new_deaths }}</td>
        </ng-container>
        <ng-container matColumnDef="total_recovered">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Total Recovered</th>
          <td mat-cell *matCellDef="let row"> {{ row.total_recovered }}</td>
        </ng-container>
        <ng-container matColumnDef="active_cases">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Active Cases</th>
          <td mat-cell *matCellDef="let row"> {{ row.active_cases }}</td>
        </ng-container>
        <ng-container matColumnDef="critical">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Critical</th>
          <td mat-cell *matCellDef="let row"> {{ row.critical }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
     
    </div>
  </div>
</div>
